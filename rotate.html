<!DOCTYPE html>
<html>
	<head>
		<!-- A-Frame  -->
		<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>

		<!-- AR.js -->
		<script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js'></script>
		
		<script>
			// Get current device orientation and set rotation of scene
			var setSceneRotation = function(event) {
				var heading = event.alpha;
				var newZ = (-heading * Math.PI / 180);
				alert("Heading: " + heading +"\n New Z: "+newZ);
				if (heading !== null) {
					var sceneEl = document.querySelector('a-scene');
					sceneEl.setAttribute('rotation', '0 0 ' + newZ);
				}
				// Remove event listener
				window.removeEventListener('deviceorientation', setSceneRotation, false);
			};
			window.addEventListener('deviceorientation', setSceneRotation, false);
		</script>
	</head>
	<body style="margin: 0;">
		<a-scene debug vr-mode-ui="enabled: false" arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: true">
			<a-camera gps-new-camera="gpsMinDistance: 20" rotation-reader></a-camera>
			<a-box color="red" position="1 1 1" scale="1 1 1"></a-box>
			<a-box color="green" position="1 1 3" scale="1 1 1"></a-box>
			<a-box color="blue" position="1 1 5" scale="1 1 1"></a-box>
		</a-scene>
	</body>
</html>
