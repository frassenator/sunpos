
Skip to content
Pull requests
Issues
Codespaces
Marketplace
Explore
@frassenator
frassenator /
sunpos
Public

Cannot fork because you own this repository and are not a member of any organizations.

Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights

    Settings

sunpos/index.htm
@frassenator
frassenator Update index.htm
Latest commit d1f66c0 Feb 20, 2023
History
1 contributor
56 lines (47 sloc) 1.87 KB
<!DOCTYPE html>
<html>
	<head>
		<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script> 
		<!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script> -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.8.0/suncalc.min.js"></script>
		
	</head>
	<body style="margin: 0;">
		<script>
			currentdate = new Date();
			
			userLocation = getLocation();

			function getLocation() {
				if (navigator.geolocation) {
					navigator.geolocation.getCurrentPosition(showPosition);
				} else { 
					console.log("Geolocation is not supported by this browser.");
				}
			}

			function showPosition(position) {
				console.log(position);
				LogSunPosition = SunCalc.getPosition(currentdate, position.coords.latitude, position.coords.longitude);
				console.log("Altitude: " + LogSunPosition.altitude + " Azimuth: " + LogSunPosition.azimuth);
				
				AFRAME.registerComponent('sun-position', {
					tick: function () {
						// Get the current time and location
						//const now = new Date();
						//const lat = 37.7749; // San Francisco latitude
						//const lng = -122.4194; // San Francisco longitude

						// Calculate the position of the sun
						const sunPosition = SunCalc.getPosition(currentdate, position.coords.latitude, position.coords.longitude);

						// Update the position and rotation of the sun marker
						const sunEl = document.querySelector('#sun');
						sunEl.setAttribute('position', {
							x: sunPosition.azimuth / 180 * 10, // Scale azimuth to fit within marker
							y: sunPosition.altitude / 90 * 10, // Scale altitude to fit within marker
							z: -10 // Position the sun marker 10 meters in front of the camera
						});
						sunEl.setAttribute('rotation', {
							x: -sunPosition.altitude / Math.PI * 180, // Rotate the sun marker to face the sun
							y: sunPosition.azimuth / Math.PI * 180,
							z: 0
						});
					}
				});

			}
		</script>
		<a-scene>
			<a-camera></a-camera>
			<a-sphere id="sun" radius="0.5" color="yellow" opacity="0.5" sun-position></a-sphere>
		</a-scene>

	</body>
</html>
