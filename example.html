<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.8.0/suncalc.min.js"></script>
	
	<style>
		#ui-container {
			position: absolute;
			top: 0;
			left: 0;
			padding: 16px;
			color: white;
			font-size: 16px;
		}
		#ui-container p {
			margin: 4px;
		}
	</style>
  </head>
  <body>
    <a-scene embedded arjs="sourceType: webcam;">
      <a-sphere id="sun" radius="0.01" color="red"></a-sphere>
      <a-entity camera></a-entity>
      <a-entity id="ui-container">
        <p id="sun-position"></p>
        <p id="user-location"></p>
        <p id="datetime"></p>
      </a-entity>
    </a-scene>
    <script>
      // Get the HTML elements for the UI
      const sunPositionEl = document.getElementById('sun-position');
      const userLocationEl = document.getElementById('user-location');
      const datetimeEl = document.getElementById('datetime');

      // Get the user's current location
      navigator.geolocation.getCurrentPosition(position => {
        const { latitude, longitude } = position.coords;
        const userLocation = { lat: latitude, lng: longitude };

        // Set the user location in the UI
        userLocationEl.textContent = `User location: ${latitude.toFixed(2)}, ${longitude.toFixed(2)}`;

        // Calculate the sun's position
        const date = new Date();
        const { altitude, azimuth } = SunCalc.getPosition(date, latitude, longitude);
        const sunPosition = SunCalc.getPosition(date, latitude, longitude);
        const distance = 1000;

        // Calculate the position of the sun in 3D space
        const phi = (90 - altitude) * Math.PI / 180;
        const theta = (azimuth + 180) * Math.PI / 180;
        const x = distance * Math.sin(phi) * Math.cos(theta);
        const y = distance * Math.cos(phi);
        const z = distance * Math.sin(phi) * Math.sin(theta);

        // Set the position of the sun in the A-Frame scene
        const sunEl = document.getElementById('sun');
        sunEl.setAttribute('position', `${x} ${y} ${z}`);

        // Set the sun's position in the UI
        sunPositionEl.textContent = `Sun position: ${x.toFixed(2)}, ${y.toFixed(2)}, ${z.toFixed(2)}`;

        // Set the datetime in the UI
        datetimeEl.textContent = `Datetime: ${date.toISOString()}`;
      }, error => {
        console.error(error);
      });
    </script>
  </body>
</html>
